//TODO: Check if no Diacritics were released since original release of repo
//TODO: Add/Remove/Update Options

const flip = {
    encode: function (text) {
        var ret = [],
            ch;

        for (var i = 0, len = text.length; i < len; i++) {
            ch = text.charAt(i);

            // combining diacritical marks: combine with previous character for ä,ö,ü,...
            if (i > 0 && (ch == '\u0324' ||
                ch == '\u0317' ||
                ch == '\u0316' ||
                ch == '\u032e')) {
                ch = this.map[text.charAt(i - 1) + ch];
                ret.pop();

            } else {
                ch = this.map[ch];
                if (typeof(ch) == "undefined") {
                    ch = text.charAt(i);
                }
            }

            ret.push(ch);


        }

        return ret.reverse().join("");
    },

    // same as encode(), for now...
    decode: this.encode,

    map: {
        "1": "⇂",
        "2": "ᄅ",
        "3": "Ɛ",
        "4": "ㄣ",
        "5": "ގ",
        "6": "9",
        "7": "ㄥ",
        "9": "6",
        "a": "ɐ",
        "b": "q",
        "c": "ɔ",
        "d": "p",
        "e": "ǝ",
        "f": "ɟ",
        "g": "ɓ",
        "h": "ɥ",
        "i": "ı",
        "j": "ɾ",
        "k": "ʞ",
        "l": "l",
        "m": "ɯ",
        "n": "u",
        "r": "ɹ",
        "t": "ʇ",
        "v": "ʌ",
        "w": "ʍ",
        "y": "ʎ",
        "A": "∀",
        "B": "ᙠ",
        "C": "Ɔ",
        "D": "ᗡ",
        "E": "Ǝ",
        "F": "Ⅎ",
        "G": "⅁",
        "J": "ſ",
        "K": "⋊",
        "L": "˥",
        "M": "W",
        "P": "Ԁ",
        "Q": "Ό",
        "R": "ᴚ",
        "T": "⊥",
        "U": "∩",
        "V": "Λ",
        "Y": "⅄",
        "&": "⅋",
        ".": "˙",
        "\"": "„",
        ";": "؛",
        "[": "]",
        "(": ")",
        "{": "}",
        "?": "¿",
        "!": "¡",
        "'": ",",
        "<": ">",
        "‾": "_",
        "¯": "_",
        "‿": "⁀",
        "⁅": "⁆",
        "∴": "∵",
        "\r": "\n",
        "ß": "ᙠ",
        "̈": "̤",
        "ä": "ɐ̤",
        "ö": "o̤",
        "ü": "n̤",
        "Ä": "∀̤",
        "Ö": "O̤",
        "Ü": "∩̤",
        "´": " ̗",
        "é": "ǝ̗",
        "á": "ɐ̗",
        "ó": "o̗",
        "ú": "n̗",
        "É": "Ǝ̗",
        "Á": "∀̗",
        "Ó": "O̗",
        "Ú": "∩̗",
        "`": " ̖",
        "è": "ǝ̖",
        "à": "ɐ̖",
        "ò": "o̖",
        "ù": "n̖",
        "È": "Ǝ̖",
        "À": "∀̖",
        "Ò": "O̖",
        "Ù": "∩̖",
        "^": " ̮",
        "ê": "ǝ̮",
        "â": "ɐ̮",
        "ô": "o̮",
        "û": "n̮",
        "Ê": "Ǝ̮",
        "Â": "∀̮",
        "Ô": "O̮",
        "Û": "∩̮",
        "⇂": "1",
        "ᄅ": "2",
        "Ɛ": "3",
        "ㄣ": "4",
        "ގ": "5",
        "ㄥ": "7",
        "ɐ": "a",
        "q": "b",
        "ɔ": "c",
        "p": "d",
        "ǝ": "e",
        "ɟ": "f",
        "ɓ": "g",
        "ɥ": "h",
        "ı": "i",
        "ɾ": "j",
        "ʞ": "k",
        "ɯ": "m",
        "u": "n",
        "ɹ": "r",
        "ʇ": "t",
        "ʌ": "v",
        "ʍ": "w",
        "ʎ": "y",
        "∀": "A",
        "ᙠ": "ß",
        "Ɔ": "C",
        "ᗡ": "D",
        "Ǝ": "E",
        "Ⅎ": "F",
        "⅁": "G",
        "ſ": "J",
        "⋊": "K",
        "˥": "L",
        "W": "M",
        "Ԁ": "P",
        "Ό": "Q",
        "ᴚ": "R",
        "⊥": "T",
        "∩": "U",
        "Λ": "V",
        "⅄": "Y",
        "⅋": "&",
        "˙": ".",
        "„": "\"",
        "؛": ";",
        "]": "[",
        ")": "(",
        "}": "{",
        "¿": "?",
        "¡": "!",
        ",": "'",
        ">": "<",
        "_": "¯",
        "⁀": "‿",
        "⁆": "⁅",
        "∵": "∴",
        "\n": "\r",
        "̤": "̈",
        "ɐ̤": "ä",
        "o̤": "ö",
        "n̤": "ü",
        "∀̤": "Ä",
        "O̤": "Ö",
        "∩̤": "Ü",
        " ̗": "´",
        "ǝ̗": "é",
        "ɐ̗": "á",
        "o̗": "ó",
        "n̗": "ú",
        "Ǝ̗": "É",
        "∀̗": "Á",
        "O̗": "Ó",
        "∩̗": "Ú",
        " ̖": "`",
        "ǝ̖": "è",
        "ɐ̖": "à",
        "o̖": "ò",
        "n̖": "ù",
        "Ǝ̖": "È",
        "∀̖": "À",
        "O̖": "Ò",
        "∩̖": "Ù",
        " ̮": "^",
        "ǝ̮": "ê",
        "ɐ̮": "â",
        "o̮": "ô",
        "n̮": "û",
        "Ǝ̮": "Ê",
        "∀̮": "Â",
        "O̮": "Ô",
        "∩̮": "Û"
    }// TODO: flip more letters with stuff around them. See http://en.wikipedia.org/wiki/Combining_character

}
module.exports = flip;